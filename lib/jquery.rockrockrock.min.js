!function($){$.fn.rockrockrock=function(e){var i=this,t=$.extend({prefix:"rock",current:0,ogg:!1,fadeTempo:500,keyboard:!1,callback:null},e),n=document.createElement("audio"),r=document.createElement("source");if(document.body.appendChild(n),n.appendChild(r),t.ogg){var o=document.createElement("source");n.appendChild(o)}var c=this,a=c.children(":eq("+t.current+")"),u=$("."+t.prefix+"--playing"),d=$("."+t.prefix+"--play"),s=$("."+t.prefix+"--pause"),f=$("."+t.prefix+"--next"),l=$("."+t.prefix+"--prev"),p=$("."+t.prefix+"--mute"),g=$("."+t.prefix+"--unmute"),h=$("."+t.prefix+"--timerange"),v=$("."+t.prefix+"--timeposition"),m=$("."+t.prefix+"--volslider"),x=function(){i.trigger(t.prefix+".play"),n.play(),$(d).hide(),$(s).show()},k=function(){i.trigger(t.prefix+".pause"),n.pause(),$(s).hide(),$(d).show()},y=function(){i.trigger(t.prefix+".next");var e=$(".is-active").next();e.length||(e=$(".is-active").siblings().first()),q(e)},C=function(){i.trigger(t.prefix+".prev");var e=$(".is-active");n.currentTime<=1&&(e=$(".is-active").prev(),e.length||(e=$(".is-active").siblings().last())),q(e)},b=function(){i.trigger(t.prefix+".mute"),p.hide(),g.show(),$(n).animate({volume:0},t.fadeTempo,function(){n.muted=!0})},w=function(){i.trigger(t.prefix+".unmute"),g.hide(),p.show(),n.muted=!1,$(n).animate({volume:1},t.fadeTempo)},T=function(){return n.paused?0===n.currentTime?"stopped":"paused":"playing"},D=function(e,i,t){e===i&&"playing"===t?k():x()},q=function(e){var i=$(e).find("."+t.prefix+"--songtitle").text(),r=$(e).find("a").attr("href"),o=$(e).data("metadata");if(c.children().removeClass("is-active"),$(e).addClass("is-active"),u.find("."+t.prefix+"--songtitle").text(i),u.find("."+t.prefix+"--metadata").text(o),$(n).children("source:eq(0)").attr({src:r,type:"audio/mp3"}),t.ogg){var a=r.slice(0,r.length-3)+"ogg";$(n).children("source:eq(1)").attr({src:a,type:"audio/ogg"})}n.load(),t.callback.call(this)};return c.on("click","li",function(e){e.preventDefault();var i=T(),t=$(n).children("source").attr("src");q(this);var r=$(n).children("source").attr("src");D(r,t,i)}),$(n).on("seeking",function(){h.addClass("is-seeking")}).on("seeked",function(){h.removeClass("is-seeking")}),$(n).on("timeupdate",function(){var e=n.currentTime/n.duration*100;v.css("width",e+"%")}),$(h).on("click",function(e){var i=e.pageX-$(this).offset().left,t=$(this).width(),r=i/t*100;n.currentTime=r/100*n.duration,v.css("width",r+"%")}),$(m).on("change",function(){var e=$(this).val();n.volume=e/100}),t.keyboard&&$("body").keydown(function(e){32===e.keyCode&&(D("","",T()),e.preventDefault()),37===e.keyCode&&(C(),x(),e.preventDefault()),39===e.keyCode&&(y(),x(),e.preventDefault())}),$(n).on("ended",function(){y(),x()}),d.on("click",function(){x()}),s.on("click",function(){k()}),f.on("click",function(){y(),x()}),l.on("click",function(){C(),x()}),p.on("click",function(){b()}),g.on("click",function(){w()}),/iPhone|iPad|iPod/i.test(navigator.userAgent)===!0&&(p.hide(),m.hide()),n.volume=1,m.val(100*n.volume),q(a),$(s).hide(),$(g).hide(),this}}(jQuery);