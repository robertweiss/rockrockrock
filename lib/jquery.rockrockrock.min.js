!function($){$.fn.rockrockrock=function(e){var i=$.extend({prefix:"rock",current:0,ogg:!1,fadeTempo:500,keyboard:!1},e),n=document.createElement("audio"),t=document.createElement("source");if(document.body.appendChild(n),n.appendChild(t),i.ogg){var o=document.createElement("source");n.appendChild(o)}var r=this,c=r.children(":eq("+i.current+")"),a=$("."+i.prefix+"--playing"),u=$("."+i.prefix+"--play"),d=$("."+i.prefix+"--pause"),s=$("."+i.prefix+"--next"),f=$("."+i.prefix+"--prev"),l=$("."+i.prefix+"--mute"),p=$("."+i.prefix+"--unmute"),h=$("."+i.prefix+"--timerange"),v=$("."+i.prefix+"--timeposition"),m=$("."+i.prefix+"--volslider"),g=function(){n.play(),$(u).hide(),$(d).show()},k=function(){n.pause(),$(d).hide(),$(u).show()},x=function(){var e=$(".is-active").next();e.length||(e=$(".is-active").siblings().first()),D(e)},y=function(){var e=$(".is-active");n.currentTime<=1&&(e=$(".is-active").prev(),e.length||(e=$(".is-active").siblings().last())),D(e)},C=function(){l.hide(),p.show(),$(n).animate({volume:0},i.fadeTempo,function(){n.muted=!0})},w=function(){p.hide(),l.show(),n.muted=!1,$(n).animate({volume:1},i.fadeTempo)},T=function(){return n.paused?0===n.currentTime?"stopped":"paused":"playing"},b=function(e,i,n){e===i&&"playing"===n?k():g()},D=function(e){var t=$(e).find("."+i.prefix+"--songtitle").text(),o=$(e).find("a").attr("href"),c=$(e).data("metadata");if(r.children().removeClass("is-active"),$(e).addClass("is-active"),a.find("."+i.prefix+"--songtitle").text(t),a.find("."+i.prefix+"--metadata").text(c),$(n).children("source:eq(0)").attr({src:o,type:"audio/mp3"}),i.ogg){var u=o.slice(0,o.length-3)+"ogg";$(n).children("source:eq(1)").attr({src:u,type:"audio/ogg"})}n.load()};return r.on("click","li",function(e){e.preventDefault();var i=T(),t=$(n).children("source").attr("src");D(this);var o=$(n).children("source").attr("src");b(o,t,i)}),$(n).on("seeking",function(){h.addClass("is-seeking")}).on("seeked",function(){h.removeClass("is-seeking")}),$(n).on("timeupdate",function(){var e=n.currentTime/n.duration*100;v.css("width",e+"%")}),$(h).on("click",function(e){var i=e.pageX-$(this).position().left,t=$(this).width(),o=i/t*100;n.currentTime=o/100*n.duration,v.css("width",o+"%")}),$(m).on("change",function(){var e=$(this).val();n.volume=e/100}),i.keyboard&&$("body").keydown(function(e){32===e.keyCode&&(b("","",T()),e.preventDefault()),37===e.keyCode&&(y(),g(),e.preventDefault()),39===e.keyCode&&(x(),g(),e.preventDefault())}),$(n).on("ended",function(){x(),g()}),u.on("click",function(){g()}),d.on("click",function(){k()}),s.on("click",function(){x(),g()}),f.on("click",function(){y(),g()}),l.on("click",function(){C()}),p.on("click",function(){w()}),/iPhone|iPad|iPod/i.test(navigator.userAgent)===!0&&(l.hide(),m.hide()),n.volume=1,m.val(100*n.volume),D(c),$(d).hide(),$(p).hide(),this}}(jQuery);